<!--
 ~	Copyright © WebServices pour l'Éducation, 2014
 ~
 ~ This file is part of ENT Core. ENT Core is a versatile ENT engine based on the JVM.
 ~
 ~ This program is free software; you can redistribute it and/or modify
 ~ it under the terms of the GNU Affero General Public License as
 ~ published by the Free Software Foundation (version 3 of the License).
 ~
 ~ For the sake of explanation, any module that communicate over native
 ~ Web protocols, such as HTTP, with ENT Core is outside the scope of this
 ~ license and could be license under its own terms. This is merely considered
 ~ normal use of ENT Core, and does not fall under the heading of "covered work".
 ~
 ~ This program is distributed in the hope that it will be useful,
 ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
 ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 ~
 -->

<h3 whereami class="twelve centered-text"></h3>

<!--Users no results screen-->
<div class="emptyscreen row reduce-block-six" ng-if="search.index == 0 && users.all.length === 0 && !display.loading && users.searched">
	<h2 class="emptyscreen-header"><i18n>userBook.directory.noresults.users.header</i18n></h2>
	<img class="emptyscreen-image" skin-src="/img/illustrations/illus-noresults.svg">
	<p class="emptyscreen-footer"><i18n>userBook.directory.noresults.users.footer</i18n></p>
</div>

<!--Groups no results screen-->
<div class="emptyscreen row reduce-block-six" ng-if="search.index == 1 && groups.all.length === 0 && !display.loading && groups.searched">
	<h2 class="emptyscreen-header"><i18n>userBook.directory.noresults.groups.header</i18n></h2>
	<img class="emptyscreen-image" skin-src="/img/illustrations/illus-noresults.svg">
	<p class="emptyscreen-footer"><i18n>userBook.directory.noresults.groups.footer</i18n></p>
</div>
	

<div class="dominos centered-text">

	<!-- Users -->
	<div class="item" ng-repeat="user in users.match(search.text) | orderBy:'displayName' | limitTo:search.maxLength" ng-if="search.index === 0 && !display.loading">
		<section class="domino" ng-class="colorFromType(user.profile)" ng-click="selectUser(user)">
			<div class="top">
				<img ng-src="/userbook/avatar/[[user.id]]?thumbnail=290x290" class="fixed ten cell" />
			</div>

			<div class="center">
				<span translate content="directory.[[getType(user.profile).toLowerCase()]]"></span>
			</div>

			<div class="bottom">
				<div class="content">
					<span>[[user.displayName]]</span>
					<div class="bottom-locked" ng-if="user.mood != 'default'">
						<i class="[[user.mood]]"></i>
					</div>
				</div>
			</div>
		</section>
	</div>

	<!-- Groups -->
	<div class="item" ng-repeat="group in groups.match(search.text) | orderBy:'name' | limitTo:search.maxLength" ng-if="search.index === 1 && !display.loading">
		<section class="domino" ng-class="colorFromType(group.profile)" ng-click="showGroupUsers(group)">
			<div class="top">
				<div class="round active">
					<img skin-src="/img/illustrations/group-avatar.svg" />
				</div>
				<div>
					[[group.nbUsers]]
				</div>
			</div>

			<div class="center">
				<span><i18n>userBook.profile.type</i18n></span>
				<br/>
				<span translate content="directory.[[getType(group.profile).toLowerCase()]]"></span>
			</div>

			<div class="bottom">
				<div class="content">
					<span>[[group.name]]</span>
				</div>
			</div>
		</section>
	</div>

	<!-- Group Users -->
	<h2 ng-if="group.users && group.users.length > 0"><i class="back" ng-click="backToGroups()"></i><i18n>userBook.backToList</i18n></h2>
	
	<div class="item" ng-repeat="user in group.users | orderBy:'displayName' | limitTo:search.maxLength">
		<section class="domino" ng-class="colorFromType(user.type)" ng-click="selectUser(user)">
			<div class="top">
				<img ng-src="/userbook/avatar/[[user.id]]?thumbnail=290x290" class="fixed ten cell" />
			</div>

			<div class="center">
				<span translate content="directory.[[getType(user.type).toLowerCase()]]"></span>
			</div>

			<div class="bottom">
				<div class="content">
					<span>[[user.displayName]]</span>
					<div class="bottom-locked" ng-if="user.mood != 'default'">
						<i class="[[user.mood]]"></i>
					</div>
				</div>
			</div>
		</section>
	</div>

	<!-- Classrooms -->
    <div class="item" ng-repeat="classroom in classrooms.match(search.text) | limitTo:search.maxLength">
        <section class="domino grey" ng-click="selectClassroom(classroom)">
            <div class="top">
                <img skin-src="/img/illustrations/classroom.png" class="fixed twelve cell" />
            </div>
			<br>
            <div class="bottom">
                <div class="content">
                    <span>[[classroom.name]]</span>
                </div>
            </div>
        </section>
    </div>

</div>
