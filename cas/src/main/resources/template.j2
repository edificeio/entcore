{
  "name": "org.entcore~cas",
  "config": {
    "main": "org.entcore.cas.Cas",
    "port": 8023,
    "enableStructureSplit": {{ casEnableStructureSplit | default('true') }},
    "publicConf": { "skip": {{ skipCasCheck | default('true') }} },
    "csrf-token": {{ csrfToken | default('true') }},
    "app-name": "Cas",
    "app-address": "/cas",
    "app-icon": "cas-large",
    "host": "https://{{ host }}",
    "ssl": true,
    "app-type" : "SYSTEM",
    "auto-redeploy": false,
    "userbook-host": "https://{{ host }}",
    {% if casExternalLoginUri is defined %}{{ casExternalLoginUri }},{% endif %}
    {% if casExternalLogin is defined %}{{ casExternalLogin }},{% endif %}
    "integration-mode": "{{ integration_mode|default('HTTP') }}",
    "app-registry.port": 8012,
    "mode": "prod",
    "entcore.port": 8009,
    "services": [
      {
        "class": "org.entcore.cas.services.EliotRegisteredService",
        "principalAttributeName": "externalId",
        "patterns": [
          {% if eliotUri is defined %}"^(http|https):\/\/{{ eliotUri }}\/.*",{% endif %}
          "(http|https):\/\/.+.la-vie-scolaire.fr.*"
        ]
      },
      {
        "class" : "org.entcore.cas.services.AcademicSuffixRegisteredService",
        "principalAttributeName" : "login",
        "patterns" : [],
        "academicPattern" : "^(AIX-MARSEILLE|PARIS-CRIF|VERSAILLES-CRIF|CRETEIL-CRIF|PARIS|CRETEIL|VERSAILLES|AGRICOLE)-([a-zA-Z0-9-]*)$",
        "externalIdPrefix" : "^ENT\\$([0-9]*)$",
        "academicSuffix" : [
            "{\"source\": \"PARIS\" , \"target\" :\"020\"}",
            "{\"source\": \"PARIS-CRIF\" , \"target\" :\"\"}",
            "{\"source\": \"CRETEIL\" , \"target\" :\"009\"}",
            "{\"source\": \"CRETEIL-CRIF\" , \"target\" :\"\"}",
            "{\"source\": \"VERSAILLES\" , \"target\" :\"027\"}",
            "{\"source\": \"VERSAILLES-CRIF\" , \"target\" :\"\"}",
            "{\"source\": \"AGRICOLE\" , \"target\" :\"028\"}",
            "{\"source\": \"AIX-MARSEILLE\" , \"target\" :\"\"}"
        ]
      },
      {
        "class": "org.entcore.cas.services.PronoteRegisteredService",
        "principalAttributeName": "login",
        "patterns": []
      },
      {
        "class": "org.entcore.cas.services.KneRegisteredService",
        "principalAttributeName": "externalId",
        "patterns": []
      },
      {
        "class": "org.entcore.cas.services.LeSiteTvRegisteredService",
        "principalAttributeName": "login",
        "patterns": []
      },
      {
        "class": "org.entcore.cas.services.UniversalisRegisteredService",
        "principalAttributeName": "login",
        "patterns": []
      },
      {
        "class": "org.entcore.cas.services.WebclasseursRegisteredService",
        "principalAttributeName": "externalId",
        "patterns": []
      },
      {
        "class" : "org.entcore.cas.services.ZimbraRegisteredService",
        "principalAttributeName" : "login",
        "patterns" : []
      },
      {
        "class": "org.entcore.cas.services.UidRegisteredService",
        "principalAttributeName": "login",
        "patterns": []
      },
      {
        "class" : "org.entcore.cas.services.UuidRegisteredService",
        "principalAttributeName" : "userId",
        "patterns" : []
      },
      {
        "class" : "org.entcore.cas.services.UaiRegisteredService",
        "principalAttributeName" : "userId",
        "patterns" : []
      },
      {
        "class": "org.entcore.cas.services.ProEPSRegisteredService",
        "principalAttributeName": "login",
        "patterns": []
      },
      {
        "class": "org.entcore.cas.services.EducagriRegisteredService",
        "principalAttributeName": "login",
        "patterns": []
      },
      {
        "class": "org.entcore.cas.services.EduMediaRegisteredService",
        "principalAttributeName": "login",
        "patterns": []
      },
      {
        "class": "org.entcore.cas.services.GepiRegisteredService",
        "principalAttributeName": "externalId",
        "patterns": []
      },
      {
        "class": "org.entcore.cas.services.MSELRegisteredService",
        "principalAttributeName": "login",
        "patterns": []
      },
      {
        "class": "org.entcore.cas.services.GRRRegisteredService",
        "principalAttributeName": "login",
        "patterns": []
      },
      {
        "class" : "org.entcore.cas.services.BRNERegisteredService",
        "principalAttributeName" : "externalId",
        "patterns" : []
      },
      {
        "class": "org.entcore.cas.services.LabomepRegisteredService",
        "principalAttributeName": "externalId",
        "patterns": []
      },
      {
        "class" : "org.entcore.cas.services.EnglishAttackRegisteredService",
        "principalAttributeName" : "login",
        "patterns" : []
      },
      {
        "class" : "org.entcore.cas.services.CIDJRegisteredService",
        "principalAttributeName" : "login",
        "patterns" : []
      },
      {
        "class": "org.entcore.cas.services.PearltreesRegisteredService",
        "principalAttributeName": "login",
        "patterns": []
      },
      {
        "class" : "org.entcore.cas.services.ExplorateurDeMetiersRegisteredService",
        "principalAttributeName" : "id",
        "patterns" : []
      },
      {
        "class" : "org.entcore.cas.services.SalvumRegisteredService",
        "principalAttributeName" : "login",
        "patterns" : []
      },
      {
        "class" : "org.entcore.cas.services.MilliwebRegisteredService",
        "principalAttributeName" : "login",
        "patterns" : []
      },
      {
        "class" : "org.entcore.cas.services.PmbRegisteredService",
        "principalAttributeName" : "login",
        "patterns" : []
      },
      {
        "class" : "org.entcore.cas.services.IjboxRegisteredService",
        "principalAttributeName" : "externalId",
        "patterns" : []
      },
      {
        "class" : "org.entcore.cas.services.EnseignoRegisteredService",
        "principalAttributeName" : "id",
        "patterns" : []
      },
      {
        "class":"org.entcore.cas.services.AtNormandieRegisteredService",
        "principalAttributeName":"id",
        "patterns":[]
      },
      {
        "class": "org.entcore.cas.services.DefaultRegisteredService",
        "principalAttributeName": "login",
        "patterns": []
      },
      {
        "class": "org.entcore.cas.services.SpipRegisteredService",
        "principalAttributeName": "externalId",
        "patterns": ["^(http|https):\/\/www.site.ac-aix-marseille.fr.*"]
      },
      {
          "class": "org.entcore.cas.services.EleaRegisteredService",
          "principalAttributeName": "login",
          "patterns": []
      },
      {
        "class": "org.entcore.cas.services.ElmsRegisteredService",
        "principalAttributeName": "login",
        "patterns": []
      },
      {
        "class": "org.entcore.cas.services.ExternalIdRegisteredService",
        "principalAttributeName": "externalId",
        "patterns": []
      },
      {
        "class": "org.entcore.cas.services.GRR2RegisteredService",
        "principalAttributeName": "externalId",
        "patterns": []
      },
      {
        "class": "org.entcore.cas.services.Spip2RegisteredService",
        "principalAttributeName": "externalId",
        "patterns": []
      },
      {
        "class": "org.entcore.cas.services.WebGerestRegisteredService",
        "principalAttributeName": "login",
        "patterns": []
      },
      {
      	"class": "org.entcore.cas.services.IkigaiRegisteredService",
      	"principalAttributeName": "login",
      	"patterns": []
      },
      {
        "class": "org.entcore.cas.services.GenericRegisteredService",
        "principalAttributeName": "externalId",
        "patterns": []
      },
      {
        "class": "org.entcore.cas.services.OdeRegisteredService",
        "principalAttributeName": "externalId",
        "patterns": []
      },
      {
      	"class" : "org.entcore.cas.services.ProtectedEmailRegisteredService",
      	"principalAttributeName" : "externalId",
      	"patterns" : []
      }
    ]
  }
}