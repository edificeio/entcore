!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).HTMLDOMParser=t()}(this,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n="html",r="head",o="body",i=/<([a-zA-Z]+[0-9]?)/,a=/<head[^]*>/i,u=/<body[^]*>/i,l=function(){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},c=function(){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},s="object"==typeof window&&window.DOMParser;if("function"==typeof s){var p=new s;c=function(e,t){return t&&(e="<"+t+">"+e+"</"+t+">"),p.parseFromString(e,"text/html")},l=c}if("object"==typeof document&&document.implementation){var d=document.implementation.createHTMLDocument();l=function(e,t){return t?(d.documentElement.querySelector(t).innerHTML=e,d):(d.documentElement.innerHTML=e,d)}}var f,h="object"==typeof document?document.createElement("template"):{};h.content&&(f=function(e){return h.innerHTML=e,h.content.childNodes});var m=function(e){var t,s,p,d,h=e.match(i);switch(h&&h[1]&&(t=h[1].toLowerCase()),t){case n:return s=c(e),a.test(e)||(p=s.querySelector(r))&&p.parentNode.removeChild(p),u.test(e)||(p=s.querySelector(o))&&p.parentNode.removeChild(p),s.querySelectorAll(n);case r:case o:return d=(s=l(e)).querySelectorAll(t),u.test(e)&&a.test(e)?d[0].parentNode.childNodes:d;default:return f?f(e):(p=l(e,o).querySelector(o)).childNodes}},y={},b={},v={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0,function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"}(t=e.ElementType||(e.ElementType={})),e.isTag=function(e){return e.type===t.Tag||e.type===t.Script||e.type===t.Style},e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype}(v);var g,T={},x=e&&e.__extends||(g=function(e,t){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},g(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),w=e&&e.__assign||function(){return w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},w.apply(this,arguments)};Object.defineProperty(T,"__esModule",{value:!0}),T.cloneNode=T.hasChildren=T.isDocument=T.isDirective=T.isComment=T.isText=T.isCDATA=T.isTag=T.Element=T.Document=T.CDATA=T.NodeWithChildren=T.ProcessingInstruction=T.Comment=T.Text=T.DataNode=T.Node=void 0;var C=v,N=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),B(this,e)},e}();T.Node=N;var E=function(e){function t(t){var n=e.call(this)||this;return n.data=t,n}return x(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),t}(N);T.DataNode=E;var O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=C.ElementType.Text,t}return x(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(E);T.Text=O;var D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=C.ElementType.Comment,t}return x(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(E);T.Comment=D;var S=function(e){function t(t,n){var r=e.call(this,n)||this;return r.name=t,r.type=C.ElementType.Directive,r}return x(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(E);T.ProcessingInstruction=S;var P=function(e){function t(t){var n=e.call(this)||this;return n.children=t,n}return x(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),t}(N);T.NodeWithChildren=P;var j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=C.ElementType.CDATA,t}return x(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(P);T.CDATA=j;var A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=C.ElementType.Root,t}return x(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(P);T.Document=A;var I=function(e){function t(t,n,r,o){void 0===r&&(r=[]),void 0===o&&(o="script"===t?C.ElementType.Script:"style"===t?C.ElementType.Style:C.ElementType.Tag);var i=e.call(this,r)||this;return i.name=t,i.attribs=n,i.type=o,i}return x(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map((function(t){var n,r;return{name:t,value:e.attribs[t],namespace:null===(n=e["x-attribsNamespace"])||void 0===n?void 0:n[t],prefix:null===(r=e["x-attribsPrefix"])||void 0===r?void 0:r[t]}}))},enumerable:!1,configurable:!0}),t}(P);function _(e){return(0,C.isTag)(e)}function M(e){return e.type===C.ElementType.CDATA}function L(e){return e.type===C.ElementType.Text}function k(e){return e.type===C.ElementType.Comment}function F(e){return e.type===C.ElementType.Directive}function H(e){return e.type===C.ElementType.Root}function B(e,t){var n;if(void 0===t&&(t=!1),L(e))n=new O(e.data);else if(k(e))n=new D(e.data);else if(_(e)){var r=t?R(e.children):[],o=new I(e.name,w({},e.attribs),r);r.forEach((function(e){return e.parent=o})),null!=e.namespace&&(o.namespace=e.namespace),e["x-attribsNamespace"]&&(o["x-attribsNamespace"]=w({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(o["x-attribsPrefix"]=w({},e["x-attribsPrefix"])),n=o}else if(M(e)){r=t?R(e.children):[];var i=new j(r);r.forEach((function(e){return e.parent=i})),n=i}else if(H(e)){r=t?R(e.children):[];var a=new A(r);r.forEach((function(e){return e.parent=a})),e["x-mode"]&&(a["x-mode"]=e["x-mode"]),n=a}else{if(!F(e))throw new Error("Not implemented yet: ".concat(e.type));var u=new S(e.name,e.data);null!=e["x-name"]&&(u["x-name"]=e["x-name"],u["x-publicId"]=e["x-publicId"],u["x-systemId"]=e["x-systemId"]),n=u}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function R(e){for(var t=e.map((function(e){return B(e,!0)})),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}T.Element=I,T.isTag=_,T.isCDATA=M,T.isText=L,T.isComment=k,T.isDirective=F,T.isDocument=H,T.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},T.cloneNode=B,function(t){var n=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e&&e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var o=v,i=T;r(T,t);var a={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},u=function(){function e(e,t,n){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(n=t,t=a),"object"==typeof e&&(t=e,e=void 0),this.callback=null!=e?e:null,this.options=null!=t?t:a,this.elementCB=null!=n?n:null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var n=this.options.xmlMode?o.ElementType.Tag:void 0,r=new i.Element(e,t,void 0,n);this.addNode(r),this.tagStack.push(r)},e.prototype.ontext=function(e){var t=this.lastNode;if(t&&t.type===o.ElementType.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{var n=new i.Text(e);this.addNode(n),this.lastNode=n}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===o.ElementType.Comment)this.lastNode.data+=e;else{var t=new i.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new i.Text(""),t=new i.CDATA([e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var n=new i.ProcessingInstruction(e,t);this.addNode(n)},e.prototype.handleCallback=function(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null},e}();t.DomHandler=u,t.default=u}(b);for(var q,G={CASE_SENSITIVE_TAG_NAMES:["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"]},V=b,z=G.CASE_SENSITIVE_TAG_NAMES,W=V.Comment,Z=V.Element,J=V.ProcessingInstruction,K=V.Text,Q={},U=0,X=z.length;U<X;U++)q=z[U],Q[q.toLowerCase()]=q;function Y(e){for(var t,n={},r=0,o=e.length;r<o;r++)n[(t=e[r]).name]=t.value;return n}function $(e){var t=function(e){return Q[e]}(e=e.toLowerCase());return t||e}y.formatAttributes=Y,y.formatDOM=function e(t,n,r){n=n||null;for(var o,i=[],a=0,u=t.length;a<u;a++){var l,c=t[a];switch(c.nodeType){case 1:o=$(c.nodeName),(l=new Z(o,Y(c.attributes))).children=e("template"===o?c.content.childNodes:c.childNodes,l);break;case 3:l=new K(c.nodeValue);break;case 8:l=new W(c.nodeValue);break;default:continue}var s=i[a-1]||null;s&&(s.next=l),l.parent=n,l.prev=s,l.next=null,i.push(l)}return r&&((l=new J(r.substring(0,r.indexOf(" ")).toLowerCase(),r)).next=i[0]||null,l.parent=n,i.unshift(l),i[1]&&(i[1].prev=i[0])),i};var ee=m,te=y.formatDOM,ne=/<(![a-zA-Z\s]+)>/;return t((function(e){if("string"!=typeof e)throw new TypeError("First argument must be a string");if(""===e)return[];var t,n=e.match(ne);return n&&n[1]&&(t=n[1]),te(ee(e),null,t)}))}));
//# sourceMappingURL=html-dom-parser.min.js.map
